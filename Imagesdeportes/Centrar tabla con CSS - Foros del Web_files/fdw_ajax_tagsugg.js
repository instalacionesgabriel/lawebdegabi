function fdw_AJAX_TagSuggest(C,A,D,E){var B=new vB_AJAX_TagSuggest(C,A,D);B.custom=[];B.fns=[];YAHOO.lang.augmentObject(B,E);B.__set_text=B.set_text;B.set_text=function(F){this.__set_text(F);if(F>=this.tagslength){this.fns[F-this.tagslength].call(this);return false}if(this.redirect){location.href="tags.php?"+SESSIONURL+"tag="+encodeURIComponent(this.textobj.value)}return false;};B.menu_build=function(){this.menu_empty();var F=new RegExp("^("+PHP.preg_quote(this.fragment)+")","i");this.tagslength=this.tags.length;if(this.custom){for(var H=0;H<this.custom.length;H++){this.tags.push(this.fragment)}};var G="<ul>";for(var E in this.tags){if(YAHOO.lang.hasOwnProperty(this.tags,E)){G+='<li class="'+(E==this.selected?"menu_highlight menuleft":"menuleft")+'">';G+="<a href=\"#\" onclick=\""+this.varname+(E>=this.tagslength?".fns["+(E-this.tagslength)+"].call("+this.varname+")":".set_text("+E+")")+";return false\">"+this.tags[E].replace(F,(E>=this.tagslength?this.custom[E-this.tagslength]:"<strong>$1</strong>"))+"</a>";G+='</li>';}}this.menuobj.innerHTML=G;if(this.vbmenu==null){fdwMenus.register(this.menukey,false,false,true,null,true);this.vbmenu=fdwMenus.menus[this.menukey];}};B.menu_show=function(){if(this.active&&this.vbmenu){fdwMenus.show(this.menukey);this.menuopen=true}};B.menu_hide=function(){fdwMenus.hide();this.menuopen=false;};B.set_row_selection=function(F){var G=fetch_tags(this.menuobj,"li");YAHOO.util.Dom.removeClass(G[this.selected],"menu_highlight");this.selected=F;YAHOO.util.Dom.addClass(G[this.selected],"menu_highlight");};if(B.search){fdw_Search_Form(B);}return B;}function fdw_Search_Form(A){A.formobj=fetch_object(A.search.form);A.search_submit=function(G){if(G){YAHOO.util.Event.stopEvent(G)}var D,E="",F;for(var A=0,B=0,C=["cx","cof","ie","query","do"];B=C[A];A++){D=(B=="query"?"q":B);if(F=this.formobj.elements[B]){if(D=="do"&&F.value!="search")continue;E+="&"+D+"="+encodeURIComponent(F.value)}}location.href=this.formobj.action+"?"+SESSIONURL+E};YAHOO.util.Event.on(A.formobj,"submit",A.search_submit,null,A);A.custom.push(A.search.phrase[0]);A.fns.push(function(){this.search_submit(null)});if(A.search.advanced){A.custom.push(A.search.phrase[1]);A.fns.push(function(){this.formobj.submit()})}}